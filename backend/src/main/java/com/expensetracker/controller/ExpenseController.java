package com.expensetracker.controller;\n\nimport com.expensetracker.model.Expense;\nimport com.expensetracker.model.User;\nimport com.expensetracker.service.ExpenseService;\nimport com.expensetracker.service.UserService;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.security.Principal;\nimport java.util.List;\n\n@RestController\n@RequestMapping("/api/expenses")\npublic class ExpenseController {\n\n    @Autowired\n    private ExpenseService expenseService;\n    @Autowired\n    private UserService userService;\n\n    @GetMapping\n    public List<Expense> getExpenses(Principal principal) {\n        User user = userService.findByUsername(principal.getName());\n        return expenseService.findByUser(user);\n    }\n\n    @PostMapping\n    public Expense addExpense(@RequestBody Expense expense, Principal principal) {\n        User user = userService.findByUsername(principal.getName());\n        expense.setUser(user);\n        return expenseService.save(expense);\n    }\n\n    @DeleteMapping("/{id}")\n    public String deleteExpense(@PathVariable Long id) {\n        expenseService.delete(id);\n        return "Deleted";\n    }\n}\n